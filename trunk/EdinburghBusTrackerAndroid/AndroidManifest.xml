<?xml version="1.0" encoding="UTF-8"?>
<!--
/*
 * Copyright (C) 2009 - 2012 Niall 'Rivernile' Scott
 *
 * This software is provided 'as-is', without any express or implied
 * warranty.  In no event will the authors or contributors be held liable for
 * any damages arising from the use of this software.
 *
 * The aforementioned copyright holder(s) hereby grant you a
 * non-transferrable right to use this software for any purpose (including
 * commercial applications), and to modify it and redistribute it, subject to
 * the following conditions:
 *
 *  1. This notice may not be removed or altered from any file it appears in.
 *
 *  2. Any modifications made to this software, except those defined in
 *     clause 3 of this agreement, must be released under this license, and
 *     the source code of any modifications must be made available on a
 *     publically accessible (and locateable) website, or sent to the
 *     original author of this software.
 *
 *  3. Software modifications that do not alter the functionality of the
 *     software but are simply adaptations to a specific environment are
 *     exempt from clause 2.
*/ -->
<manifest
    xmlns:android="http://schemas.android.com/apk/res/android"
    package="uk.org.rivernile.edinburghbustracker.android"
    android:versionCode="8"
    android:versionName="2.1">
        
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.VIBRATE" />

    <uses-feature android:name="android.hardware.location" android:required="false" />
    <uses-feature android:name="android.hardware.location.network" android:required="false" />
    <uses-feature android:name="android.hardware.location.gps" android:required="false" />

    <uses-sdk android:minSdkVersion="4"
              android:targetSdkVersion="15"/>
              
    <application
        android:label="@string/app_name"
        android:description="@string/app_description"
        android:icon="@drawable/appicon"
        android:theme="@style/MyBusEdinburgh"
        android:backupAgent="SettingsBackupAgent" >
            
        <meta-data
            android:name="com.google.android.backup.api_key"
            android:value="AEdPqrEAAAAIgfw_r8tIY0nyXAflwrdH6DJ1K38Gwog80pGrPw" />
            
        <uses-library android:name="com.google.android.maps" />
        
        <activity
            android:name=".MainActivity"
            android:theme="@style/MyBusEdinburgh.NoTitleBar" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
        
        <activity android:name=".EnterStopCodeActivity"
                  android:label="@string/enterstopcode_title" />
                  
        <activity android:name=".FavouriteStopsActivity"
                  android:label="@string/favouriteshortcut_label">
            <intent-filter>
                <action android:name="android.intent.action.CREATE_SHORTCUT" />
            </intent-filter>
        </activity>
        
        <activity android:name=".DisplayStopDataActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <data android:scheme="http"
                      android:host="mobile.mybustracker.co.uk" />
            </intent-filter>
            <intent-filter>
                <action android:name="uk.org.rivernile.edinburghbustracker.android.ACTION_VIEW_STOP_DATA" />
            </intent-filter>
        </activity>
        
        <activity android:name=".PreferencesActivity"
                  android:label="@string/preferences_title"
                  android:theme="@style/MyBusEdinburgh.Dark"/>
                  
        <activity android:name=".AddEditFavouriteStopActivity"
                  android:label="@string/addeditstop_title" />
                  
        <activity android:name=".BusStopMapActivity"
                  android:label="@string/map_title"
                  android:theme="@style/MyBusEdinburgh.Dark.MapActivity"
                  android:launchMode="singleTop" >
            <intent-filter>
                <action android:name="android.intent.action.SEARCH" />
            </intent-filter>
            <meta-data
                android:name="android.app.searchable"
                android:resource="@xml/searchable" />
        </activity>
        
        <activity android:name=".NewsUpdatesActivity"
                  android:label="@string/newsupdates_title" />
                  
        <activity android:name=".NearestStopsActivity"
                  android:label="@string/neareststops_title" />
                  
        <activity android:name=".AlertManagerActivity"
                  android:label="@string/alertmanager_title" />
                  
        <activity android:name=".AddProximityAlertActivity"
                  android:label="@string/alert_dialog_prox_title" />
                  
        <activity android:name=".AddTimeAlertActivity"
                  android:label="@string/alert_dialog_time_title" />

        <provider android:name=".MapSearchHistoryProvider"
                  android:authorities="uk.org.rivernile.edinburghbustracker.android.MapSearchHistoryProvider" />
                  
        <receiver android:name=".alerts.ProximityAlertReceiver" />
        
        <service android:name=".alerts.TimeAlertService"
                 android:icon="@drawable/appicon"
                 android:exported="false" />
    </application>
</manifest>
